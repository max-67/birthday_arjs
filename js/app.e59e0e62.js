(function(t){function e(e){for(var a,i,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&m.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},s={app:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"08af":function(t,e,n){"use strict";n("bfc3")},"13cd":function(t,e,n){},1872:function(t,e,n){},"22bc":function(t,e,n){t.exports=n.p+"img/max_1.3e4675e3.png"},"324b":function(t,e,n){"use strict";n("13cd")},"56d7":function(t,e,n){"use strict";n.r(e);var a=n("2b0e"),s=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100%"}},[e("Header"),e("Arjs")],1)},r=[],i=function(){var t=this;t._self._c;return t._m(0)},o=[function(){var t=this,e=t._self._c;return e("header",{staticStyle:{height:"80px","background-color":"#ccccff"}},[e("div",[e("h2",{staticStyle:{"padding-top":"14px"}},[t._v("С днем рождения, Любимая")]),e("div",{staticClass:"post-detail"},[e("span",{staticClass:"post-info"},[e("span",[t._v("Июль 31, 2023")])])])])])}],c={name:"Header",props:{t:String,s:String}},l=c,u=(n("08af"),n("2877")),d=Object(u["a"])(l,i,o,!1,null,"4519a1fb",null),m=d.exports,g=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"calc(100vh - 130px)"}},["begin"!=t.status&&"scan_baloons"!=t.status&&"scan_baloons_dlg1"!=t.status&&"scan_models_dlg1"!=t.status&&"labirint"!=t.status&&"taskphotos"!=t.status&&"taskphotos_dlg2"!=t.status&&"labirint_dlg2"!=t.status&&"end"!=t.status?e("a-scene",{attrs:{embedded:"",arjs:""}},[e("a-marker",{attrs:{id:"cake",preset:"hiro"}},[e("a-gltf-model",{attrs:{position:"0 -1 0",scale:"1.1 1.1 1.1",src:"cake2.gltf","animation-mixer":""}})],1),e("a-marker",{attrs:{id:"strawberry",type:"pattern",url:"strawberry.patt"}}),e("a-entity",{attrs:{camera:""}})],1):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:"end"==t.status,expression:"status == 'end'"}],staticClass:"animation_end",staticStyle:{"margin-top":"90px",display:"flex","justify-content":"center"}},[e("img",{staticStyle:{width:"100vw"},attrs:{src:t.getPngUrl("birthday")}})]),"scan_baloons"==t.status?e("ScanBaloons",{on:{completed:t.scanBaloonsComplete}}):t._e(),e("Actor",{attrs:{message:t.current_msg,emoji:t.current_emoji,delay:t.current_delay}})],1)},p=[],h=(n("b7ef"),function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.message,expression:"message != ''"}]},[t._m(0),e("div",{staticStyle:{position:"absolute",bottom:"30px",right:"10px"}},[e("img",{attrs:{src:t.getImgUrl(this.emoji),alt:"",height:"90px"}})])])}),_=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"msg",attrs:{id:"msg"}},[e("div",{staticClass:"msg_text",attrs:{id:"msg_text"}})])}],f={name:"Actor",props:{message:String,emoji:String,delay:Number},data(){return{show_continue:!1}},watch:{message(t){null!=t&&void 0!=t&&this.typeWriter()}},methods:{timeout(t){return new Promise(e=>setTimeout(e,t))},async typeWriter(){console.log(this.message.length);const t=document.getElementById("msg_text");t.innerHTML="";for(const e of this.message)t.innerHTML+=e," "!=e&&await this.timeout(90);setTimeout(()=>{this.show_continue=!0,t.innerHTML+='<div style="font-size: 12px; color: #969696">Нажми для продолжения</div>'},0)},getImgUrl(t){if(""==t||null==t)return null;const e=n("9142");return e("./"+t+".png")}}},x=f,v=(n("324b"),Object(u["a"])(x,h,_,!1,null,"af85d3f8",null)),y=v.exports,b=n("0798"),w=n("490a"),j=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{margin:"10px"}},[e("video",{attrs:{id:"video",width:t.$vuetify.breakpoint.width-20,height:"300",autoplay:"",playsinline:""}}),e("a",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"booth-capture-button",attrs:{href:"#",id:"capture"}},[t._v("Сделать фото")]),e("canvas",{attrs:{id:"canvas",width:"400",height:"300"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticStyle:{display:"flex","justify-content":"center","margin-top":"10px"}},[e(w["a"],{attrs:{indeterminate:"",color:"#8379b5"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.alert_hide,expression:"!alert_hide"}],staticStyle:{position:"absolute",top:"80px",width:"calc(100% - 20px)",left:"0",right:"0",margin:"20px auto"}},[e(b["a"],{staticStyle:{opacity:"0.8"},attrs:{type:"error",color:"#f77272"}},[t._v(" Попробуй еще! ")])],1)])])},S=[],k=n("c9bf"),O={name:"ScanBaloons",data(){return{loading:!1,right_words:"праздничное лакомство",current_words:"",alert_hide:!0}},methods:{async recognizePhoto(t){this.loading=!0;const e=await Object(k["createWorker"])({logger:t=>console.log(t)});(async()=>{await e.loadLanguage("rus"),await e.initialize("rus");const{data:{text:n}}=await e.recognize(t);console.log(n),this.current_words=n,this.checkCorrectWords(),this.loading=!1,await e.terminate()})()},alert(){this.alert_hide=!1,setTimeout(()=>{this.alert_hide=!0},2e3)},checkCorrectWords(){let t=!1;t=this.current_words.toLowerCase().includes(this.right_words),t||this.current_words.toLowerCase().includes("праздничное")&&this.current_words.toLowerCase().includes("лакомство")&&(t=!0),t?this.$emit("completed"):this.alert()}},async mounted(){const t=document.getElementById("video"),e=document.getElementById("canvas"),n=e.getContext("2d"),a=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});t.srcObject=a,t.play(),document.getElementById("capture").addEventListener("click",()=>{n.drawImage(t,0,0,400,300),this.recognizePhoto(e.toDataURL("image/png"))})}},L=O,C=(n("6836"),Object(u["a"])(L,j,S,!1,null,"33599ccc",null)),E=C.exports;function P(t){t.currentTarget.acontroller.abort()}var T={name:"Arjs",components:{Actor:y,ScanBaloons:E},data(){return{status:"begin",current_msg:"",current_emoji:"",current_delay:0,status_msgs:{begin:[{text:"С днем рождения, Любимая!!!",delay:2420,emoji:"max_4"},{text:"Сегодня у тебя праздник. Проходи в комнату, тебя ждет первое задание.",delay:5800,emoji:"max_1"},{text:"Тебе нужно будет составить слово из букв на шарах. Слово это подскажет путь истинный.",delay:7050,emoji:"max_1"},{text:"Удачи!",delay:550,emoji:"max_3",next_status:"scan_baloons_dlg1"}],scan_baloons_dlg1:[{text:"После составления слов тебе нужно будет сфотографировать его для определения корректности.",delay:7950,emoji:"max_1"},{text:'Просто наведи камеру на шарики и нажми кнопку "Сделать фото"',delay:5450,emoji:"max_1",next_status:"scan_baloons"}],scan_models_dlg1:[{text:"Верно, умничка)",delay:1350,emoji:"max_6"},{text:"Слово это - подсказка тебе. Предлагаю использовать камеру и найти праздничное лакомство.",delay:7400,emoji:"max_7",next_status:"scan_models"}],scan_models_dlg2:[{text:"Хм, похоже это оно. Изучи внимательно, возможно ты что то найдешь...",delay:5800,emoji:"max_2",next_status:"strawberry"}],strawberry_found:[{text:"Ура, ты нашла вкусную клубничку!",delay:2870,emoji:"max_8"},{text:"Хочешь пойти дальше?) ",delay:1980,emoji:"max_1"},{text:"Знаю, что хочешь)",delay:1530,emoji:"max_5"},{text:"Итак, далее ты отправляешься в свободное плавание. Дам тебе небольшую подсказку - смотри под...",delay:8e3,emoji:"max_7",next_status:"end"}]}}},watch:{status(){this.startDialog()}},methods:{getPngUrl(t){if(""==t)return null;const e=n("9142");return e("./"+t+".png")},scanBaloonsComplete(){this.status="scan_models_dlg1",this.startSceneListener()},listenerFunc(t){const e=t.target.getAttribute("id");this.t=e,"cake"==e&&"scan_models"==this.status&&(this.status="scan_models_dlg2"),"strawberry"==e&&"strawberry"==this.status&&(this.status="strawberry_found")},startSceneListener(){this.$el.addEventListener("markerFound",this.listenerFunc)},endSceneListener(){this.$el.removeEventListener("markerFound",this.listenerFunc)},timeout_msg(t){return new Promise(e=>setTimeout(e,t))},timeout_click(t){return new Promise((e,n)=>{const a=new DOMException("aborted!","AbortError"),s=setTimeout(()=>{e("you report!")},6e5);if(t.aborted)return clearTimeout(s),n(a);t.addEventListener("abort",()=>{clearTimeout(s),n(a)})})},async startDialog(){const t=this.status_msgs[this.status];if(void 0==t)return void(this.current_msg="");const e=document.querySelector("#msg");for(let a=0;a<t.length;a++){const s=t[a];e.removeEventListener("click",P),this.current_msg=s.text,this.current_emoji=s.emoji,this.current_delay=s.delay,await this.timeout_msg(s.delay),console.log("добавлен");let r=new AbortController,i=r.signal;e.addEventListener("click",P),e.acontroller=r;try{await this.timeout_click(i)}catch(n){}a==t.length-1&&(this.current_msg=""),s.hasOwnProperty("next_status")&&("end"==s.next_status&&(document.getElementById("arjs-video").style.display="none"),this.status=s.next_status)}}},async mounted(){this.startSceneListener(),await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),this.startDialog()}},M=T,A=(n("9fbd"),Object(u["a"])(M,g,p,!1,null,null,null)),B=A.exports,D={name:"App",components:{Header:m,Arjs:B},data:()=>({})},U=D,I=(n("8296"),Object(u["a"])(U,s,r,!1,null,null,null)),N=I.exports,F=n("f309");a["a"].use(F["a"]);var H=new F["a"]({});a["a"].config.productionTip=!1,new a["a"]({vuetify:H,render:t=>t(N)}).$mount("#app")},"664e":function(t,e,n){t.exports=n.p+"img/max_2.c2e70c6a.png"},6836:function(t,e,n){"use strict";n("bf37")},"6ab1":function(t,e,n){t.exports=n.p+"img/birthday.c8fa5bc2.png"},8296:function(t,e,n){"use strict";n("c57c")},8589:function(t,e,n){t.exports=n.p+"img/max_6.534e3614.png"},"86ca":function(t,e,n){t.exports=n.p+"img/max_8.95d6ce01.png"},"8ae3":function(t,e,n){t.exports=n.p+"img/max_3.7b99e5ab.png"},9142:function(t,e,n){var a={"./birthday.png":"6ab1","./logo.png":"cf05","./max_1.png":"22bc","./max_2.png":"664e","./max_3.png":"8ae3","./max_4.png":"eae6","./max_5.png":"a077","./max_6.png":"8589","./max_7.png":"b99e","./max_8.png":"86ca"};function s(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}s.keys=function(){return Object.keys(a)},s.resolve=r,t.exports=s,s.id="9142"},"9fbd":function(t,e,n){"use strict";n("1872")},a077:function(t,e,n){t.exports=n.p+"img/max_5.d8a869fa.png"},b99e:function(t,e,n){t.exports=n.p+"img/max_7.bf18691d.png"},bf37:function(t,e,n){},bfc3:function(t,e,n){},c57c:function(t,e,n){},cf05:function(t,e,n){t.exports=n.p+"img/logo.82b9c7a5.png"},eae6:function(t,e,n){t.exports=n.p+"img/max_4.f0a61795.png"}});
//# sourceMappingURL=app.e59e0e62.js.map